<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8">
    <html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://ogp.me/ns/fb#">
    <meta property="og:image" content="https://www.dicaspetz.com.br/wp-content/uploads/2021/03/piercing-para-cachorro-2.jpg">
    <meta property="og:image:secure_url" content="https://www.dicaspetz.com.br/wp-content/uploads/2021/03/piercing-para-cachorro-2.jpg">
    <meta property="og:image:type" content="image/jpg">
    <meta property="og:image:width" content="800">
    <meta property="og:image:height" content="600">
    <meta property="og:image:alt" content="graph">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mermaid/6.0.0/mermaid.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/6.0.0/mermaid.js"></script>
</head>
<body>
    <div class="mermaid">
        sequenceDiagram
        participant Alice
        participant Bob
        Alice->>John: Hello John, how are you?
        loop Healthcheck
            John->>John: Fight against hypochondria
        end
        Note right of John: Rational thoughts <br/>prevail!
        John-->>Alice: Great!
        John->>Bob: How about you?
        Bob-->>John: Jolly good!
    </div>
    <canvas width="1000" height="800" />
    <script type="text/javascript" src="https://unpkg.com/canvg@3.0.4/lib/umd.js"></script>
    <script type="text/javascript">
        let canvasExists = false;

        window.onload = () => {
            const canvas = document.querySelector('canvas');
            const ctx = canvas.getContext('2d');

            v = canvg.Canvg.fromString(ctx, document.querySelector('.mermaid').innerHTML);
            document.querySelector('.mermaid').remove()

            v.start();
        };
        
        setInterval(() => {
            if (document.querySelector('canvas') && !canvasExists) {
                document.querySelector('canvas').toBlob(blob => {
                    console.log(blob)
                })
                canvasExists = true;
            }
        }, 100)
    </script>
</body>
</html>
